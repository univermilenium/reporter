function Course(e){this.id=ko.observable(e.id);this.fullname=ko.observable(e.fullname);this.shortname=ko.observable(e.shortname)}function Group(e){this.id=ko.observable(e.id);this.name=ko.observable(e.name)}function Teacher(e){this.id=ko.observable(e.id);this.username=ko.observable(e.username);this.firstname=ko.observable(e.firstname);this.lastname=ko.observable(e.lastname)}function Student(e){this.id=ko.observable(e.id);this.Email=ko.observable(e.Email);this.Firstname=ko.observable(e.Firstname);this.Lastname=ko.observable(e.Lastname);this.ROLE=ko.observable(e.ROLE);this.RoleName=ko.observable(e.RoleName);this.Username=ko.observable(e.Usernamse);this.actividad=ko.observable(e.actividad);this.grupo=ko.observable(e.grupo);this.status=ko.observable(e.status);this.grade=ko.observable(Math.ceil(e.grade*10)/10)}function ReportViewModel(){var e=this;e.courses=ko.observableArray([]);e.groups=ko.observableArray([]);e.students=ko.observableArray([]);e.teachers=ko.observableArray([]);e.getExcel=function(){var e=$("#courseid").val();var t=$("#plantel").val();var n=$("#groupid").val();var r=$("#asignatura_txt").text();var i=$("#grupo_txt").text();window.open("excelh.php?courseid="+e+"&plantel="+t+"&groupid="+n+"&cursotxt="+r+"&grupotxt="+i)};e.updateResume=function(){var t=$("#resume");var n=$("#courseid").val();var r=$("#plantel").val();var i=$("#groupid").val();if(i==null||i==0){return}t.fadeTo(0,.5);var s=r>0?$("#plantel").find(":selected").text():"Todos";var o=n>0?$("#courseid").find(":selected").text():"Todos";$("#asignatura_txt").text(o);var u=i>0?$("#groupid").find(":selected").text():"Todos";$("#grupo_txt").text(u);var a=new Date;var f=a.getDate();var l=a.getMonth()+1;var c=a.getFullYear();if(f<10){f="0"+f}if(l<10){l="0"+l}a=f+"/"+l+"/"+c;$("#fecha_txt").text(a);e.getTeacher();t.show()};e.getTeacher=function(){e.teachers.removeAll();var t=$("#resume");var n=$("#courseid").val();var r=$("#plantel").val();var i=$("#groupid").val();if(n>0&&i>0){$.getJSON("report.php?action=teacher&courseid="+n+"&groupid="+i,function(n){var r=$.map(n,function(e){return new Teacher(e)});if(r.length>0){$.each(r,function(t,n){e.teachers.push(n)})}t.fadeTo(0,1)})}};e.getRows=function(){e.students.removeAll();var t=$("#resume");var n=$("#courseid").val();var r=$("#plantel").val();var i=$("#groupid").val();t.hide();$.getJSON("report.php?action=report&courseid="+n+"&plantel="+r+"&groupid="+i,function(t){var n=$.map(t,function(e){return new Student(e)});if(n.length>0){$.each(n,function(t,n){e.students.push(n)});e.updateResume()}})};e.getGroups=function(){$("#resume").fadeOut("fast");var t=$("#group");e.groups.removeAll();$.getJSON("report.php?action=groups&courseid="+$("#courseid").val()+"&plantel="+$("#plantel").val(),function(n){var r=$.map(n,function(e){return new Group(e)});if(r.length>0){var i=new Group({id:0,name:"- Seleccione -"});e.groups.push(i);$.each(r,function(t,n){e.groups.push(n)});t.fadeTo(.3,1)}})};e.getCourses=function(){var t=$("#group");t.fadeTo(0,.3);$.getJSON("report.php?action=courses",function(t){var n=$.map(t,function(e){return new Course(e)});if(n.length>0){var r=new Course({id:0,fullname:0,shortname:"-Seleccione-"});e.courses.push(r);$.each(n,function(t,n){e.courses.push(n)})}})};e.getCourses()}ko.applyBindings(new ReportViewModel)