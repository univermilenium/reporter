function Course(e){this.id=ko.observable(e.id);this.fullname=ko.observable(e.fullname);this.shortname=ko.observable(e.shortname)}function Group(e){this.id=ko.observable(e.id);this.name=ko.observable(e.name)}function Teacher(e){this.id=ko.observable(e.id);this.username=ko.observable(e.username);this.firstname=ko.observable(e.firstname);this.lastname=ko.observable(e.lastname)}function Student(e){this.id=ko.observable(e.id);this.Email=ko.observable(e.Email);this.Firstname=ko.observable(e.Firstname);this.Lastname=ko.observable(e.Lastname);this.ROLE=ko.observable(e.ROLE);this.RoleName=ko.observable(e.RoleName);this.Username=ko.observable(e.Usernamse);this.actividad=ko.observable(e.actividad);this.grupo=ko.observable(e.grupo);this.status=ko.observable(e.status);this.grade=ko.observable(Math.ceil(e.grade*10)/10)}function ReportViewModel(){var e=this;e.courses=ko.observableArray([]);e.groups=ko.observableArray([]);e.students=ko.observableArray([]);e.teachers=ko.observableArray([]);e.getExcel=function(){var e=$("#courseid").val();var t=$("#plantel").val();var n=$("#groupid").val();var r=$("#plantel_txt").text();var i=$("#asignatura_txt").text();var s=$("#grupo_txt").text();window.open("excelh.php?courseid="+e+"&plantel="+t+"&groupid="+n+"&planteltxt="+r+"&cursotxt="+i+"&grupotxt="+s)};e.updateResume=function(){var t=$("#courseid").val();var n=$("#plantel").val();var r=$("#groupid").val();var i=n>0?$("#plantel").find(":selected").text():"Todos";$("#plantel_txt").text(i);var s=t>0?$("#courseid").find(":selected").text():"Todos";$("#asignatura_txt").text(s);var o=r>0?$("#groupid").find(":selected").text():"Todos";$("#grupo_txt").text(o);var u=new Date;var a=u.getDate();var f=u.getMonth()+1;var l=u.getFullYear();if(a<10){a="0"+a}if(f<10){f="0"+f}u=a+"/"+f+"/"+l;$("#fecha_txt").text(u);e.getTeacher();$("#resume").show()};e.getTeacher=function(){e.teachers.removeAll();var t=$("#courseid").val();var n=$("#plantel").val();var r=$("#groupid").val();if(t>0&&r>0){$.getJSON("report.php?action=teacher&courseid="+t+"&groupid="+r,function(t){var n=$.map(t,function(e){return new Teacher(e)});if(n.length>0){$.each(n,function(t,n){e.teachers.push(n)})}})}};e.getRows=function(){e.students.removeAll();$("#resume").hide();var t=$("#courseid").val();var n=$("#plantel").val();var r=$("#groupid").val();$.getJSON("report.php?action=report&courseid="+t+"&plantel="+n+"&groupid="+r,function(t){var n=$.map(t,function(e){return new Student(e)});if(n.length>0){$.each(n,function(t,n){e.students.push(n)});e.updateResume()}})};e.getGroups=function(){e.groups.removeAll();$.getJSON("report.php?action=groups&plantel="+$("#plantel").val(),function(t){var n=$.map(t,function(e){return new Group(e)});if(n.length>0){var r=new Group({id:0,name:"- Todos -"});e.groups.push(r);$.each(n,function(t,n){e.groups.push(n)})}})};e.getCourses=function(){$.getJSON("report.php?action=courses",function(t){var n=$.map(t,function(e){return new Course(e)});if(n.length>0){var r=new Course({id:0,fullname:0,shortname:"-Seleccione-"});e.courses.push(r);$.each(n,function(t,n){e.courses.push(n)})}})};e.getCourses()}ko.applyBindings(new ReportViewModel)